(()=>{"use strict";const t=function(){function t(){}return t.loop=!0,t.board={width:800,height:800,rows:20,cols:20},t.block={width:t.board.width/t.board.rows,height:t.board.height/2/t.board.cols},t.player={width:.1*t.board.width,height:.02*t.board.height,starting_points:{x:.46*t.board.width,y:.96*t.board.height},move_speed:.03*t.board.width},t.ball={x:.5*t.board.width,y:.8*t.board.height,speed:3,radio:7},t}();var i=t.block,e=i.width,o=i.height;const s=function(){function t(t,i,s){void 0===s&&(s=1),this.width=e,this.height=o,this.x=t,this.y=i,this.state=s}return t.prototype.render=function(t){0!==this.state&&(t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.stroke(),t.closePath())},t.prototype.destroy=function(){this.state=0},t.prototype.isDestroyed=function(){return 0===this.state},t}();var r,h=(r=function(t,i){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},r(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),n=t.player,a=n.move_speed,c=n.width,d=n.height,l=n.starting_points,p=t.board.width;const y=function(t){function i(){var i=t.call(this,l.x,l.y)||this;return i.width=c,i.height=d,i.move_speed=a,window.addEventListener("keypress",(function(t){"h"!==t.key&&"H"!==t.key||i.moveLeft(),"l"!==t.key&&"L"!==t.key||i.moveRight()})),i}return h(i,t),i.prototype.move=function(t){"left"===t&&(this.x=Math.max(this.x-this.move_speed,0)),"right"===t&&(this.x=Math.min(this.x+this.move_speed,p-this.width))},i.prototype.moveLeft=function(){this.move("left")},i.prototype.moveRight=function(){this.move("right")},i}(s);function u(){return Math.random()<.5?0:1}var f=t.board,v=f.width,w=f.height,g=t.ball,x=g.x,b=g.y,m=g.speed,k=g.radio,_=function(){function t(){this.x=x,this.y=b,this.x_speed=0,this.y_speed=-m,this.radio=k}return t.prototype.render=function(t,i){t.beginPath(),t.arc(this.x,this.y,this.radio,0,2*Math.PI),t.fillStyle="#000000",t.fill(),t.closePath(),this.x+=this.x_speed,this.y+=this.y_speed,this.calculateDirection(i)},t.prototype.calculateDirection=function(t){var i=this.getNextMoves(),e=i.x,o=i.y;(e>v-this.radio||e<this.radio)&&this.invertX(),o<this.radio&&this.invertY(),e+this.radio>t.x&&o+this.radio>t.y&&e+this.radio<t.x+t.width&&o+this.radio<t.y+t.height&&(0===this.x_speed?(Boolean(u())?this.x_speed=m:this.x_speed=-m,this.invertY()):this.invertY()),e+this.radio>t.y+t.height&&this.invertX()},t.prototype.checkIfColliedWithBrick=function(t){this.x>t.x+this.radio&&this.x<t.x+t.width+this.radio&&this.y>t.y+this.radio&&this.y<t.y+t.height+this.radio&&(t.destroy(),this.invertY())},t.prototype.invertY=function(){this.y_speed=-this.y_speed},t.prototype.invertX=function(){this.x_speed=-this.x_speed},t.prototype.checkEndLine=function(){return this.getNextMoves().y>w-this.radio},t.prototype.getNextMoves=function(){return{x:this.x+this.x_speed,y:this.y+this.y_speed}},t}();const B=_;var C=t.board,E=C.width,R=C.height,P=C.cols,I=C.rows,L=new(function(){function t(){this.width=E,this.height=R,this.rows=I,this.cols=P,this.middle=R/2,this.bottom=R-30,this.canvas=function(t){var i=document.getElementById(t);if(!i)throw new Error("ERROR: No se encontro el elemento de id ".concat(t));return i}("game"),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.background="white",this.canvas.style.border="4px",this.canvas.style.borderColor="black",this.blocks=this.computeInitialBlocks(),this.player=new y,this.ball=new B}return t.prototype.getCanvasCtx=function(){var t=this.canvas.getContext("2d");if(!t)throw new Error("ERROR: No context found for canvas");return t},t.prototype.clearCanvas=function(t){t.beginPath(),t.clearRect(0,0,this.width,this.height),t.closePath()},t.prototype.computeInitialBlocks=function(){for(var t=0,i={},e=[],o=0;t<this.middle;++o)t=this.middle/this.rows*o,e.push(t);i.y=e;var r=[];for(t=0,o=0;t<this.width;++o)t=this.width/this.cols*o,r.push(t);i.x=r;for(var h=new Array(this.rows),n=0;n<this.rows;++n){for(var a=new Array(this.cols),c=0;c<this.cols;++c){var d=i.y[n],l=i.x[c];a[c]=new s(l,d,u())}h[n]=a}return h},t.prototype.processBlocksAndRender=function(t){for(var i=0;i<this.blocks.length;++i)for(var e=0;e<this.blocks[i].length;++e){var o=this.blocks[i][e];this.checkIfBallHitBlocks(o),o.render(t)}},t.prototype.render=function(){var t=this.getCanvasCtx();this.clearCanvas(t),this.player.render(t),this.ball.render(t,this.player),this.processBlocksAndRender(t)},t.prototype.gameLost=function(){return this.ball.checkEndLine()},t.prototype.checkIfBallHitBlocks=function(t){t.isDestroyed()||this.ball.checkIfColliedWithBrick(t)},t.prototype.gameEnded=function(){for(var t=!0,i=0;i<I;++i)for(var e=0;e<P;++e)this.blocks[i][e].isDestroyed()||(t=!1);return t},t}());!function t(){L.gameLost()?alert("termino el juego"):L.gameEnded()?alert("Ganase el juego"):(L.render(),window.requestAnimationFrame(t))}()})();